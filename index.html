<!DOCTYPE html>
<html lang="ar" dir="rtl" id="mainHtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… ÙˆØµÙŠØªÙŠ Ø§Ù„Ù…Ø·ÙˆØ± | MY WILL PRO</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Amiri:wght@700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #3b82f6;
            --accent: #fbbf24;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: #020617;
            color: #f8fafc;
            min-height: 100vh;
            overflow-x: hidden;
            margin: 0;
        }

        /* Ø®Ù„ÙÙŠØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ© Ù…ØªØ­Ø±ÙƒØ© */
        .islamic-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1e293b 0%, #020617 100%);
            z-index: -1;
            overflow: hidden;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.3;
            animation: pulse 4s infinite ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.5); opacity: 0.7; }
        }

        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠ */
        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 2rem;
        }

        .glass-input {
            background: rgba(0, 0, 0, 0.3) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            color: white !important;
            border-radius: 1rem;
            transition: 0.3s;
        }

        .glass-input:focus {
            border-color: var(--primary) !important;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
        }

        .quran-font { font-family: 'Amiri', serif; }

        .btn-grad {
            background: linear-gradient(90deg, #1e40af, #3b82f6);
            transition: 0.4s;
        }
        .btn-grad:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
        }

        /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù†Ø§ØµØ± */
        .hidden { display: none !important; }
        
        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #020617; }
        ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
    </style>
</head>
<body>

    <div class="islamic-bg" id="stars-container"></div>

    <div class="fixed top-6 left-6 right-6 z-50 flex justify-between items-center">
        <button onclick="openM('settingsModal')" class="glass p-3 px-5 flex items-center gap-2 hover:bg-white/5 transition">
            âš™ï¸ <span data-key="settings">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
        </button>
        <button onclick="openM('adminAuthModal')" class="glass p-3 px-5 border-amber-500/30 text-amber-500 hover:bg-amber-500/10 transition">
            ğŸ›¡ï¸ <span data-key="admin_gate">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…Ø´Ø±Ù</span>
        </button>
    </div>

    <main class="container mx-auto px-4 py-24 min-h-screen flex items-center justify-center">
        
        <div id="v-welcome" class="max-w-4xl w-full glass p-12 text-center space-y-8 animate-in fade-in duration-700">
            <div class="mb-6 opacity-50">ğŸŒ™</div>
            <h1 class="text-7xl md:text-9xl font-black text-white quran-font tracking-widest" data-key="title">ÙˆÙØµÙÙŠÙÙ‘ØªÙÙŠ</h1>
            <p class="text-2xl md:text-3xl leading-relaxed quran-font text-blue-100/80" data-key="verse">
                ï´¿ÙƒÙØªÙØ¨Ù Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙÙ…Ù’ Ø¥ÙØ°ÙØ§ Ø­ÙØ¶ÙØ±Ù Ø£ÙØ­ÙØ¯ÙÙƒÙÙ…Ù Ø§Ù„Ù’Ù…ÙÙˆÙ’ØªÙ Ø¥ÙÙ†Ù’ ØªÙØ±ÙÙƒÙ Ø®ÙÙŠÙ’Ø±Ù‹Ø§ Ø§Ù„Ù’ÙˆÙØµÙÙŠÙÙ‘Ø©Ùï´¾
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-12">
                <button onclick="navTo('v-register')" class="btn-grad py-6 rounded-3xl text-2xl font-bold shadow-2xl" data-key="create_account">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</button>
                <button onclick="navTo('v-login')" class="glass py-6 rounded-3xl text-2xl font-bold hover:bg-white/10 transition" data-key="login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            </div>
        </div>

        <div id="v-register" class="hidden max-w-lg w-full glass p-10 relative">
            <button onclick="navTo('v-welcome')" class="absolute top-6 right-6 text-blue-400 font-bold">âœ• <span data-key="back">Ø±Ø¬ÙˆØ¹</span></button>
            <h2 class="text-3xl font-bold mb-8 text-center" data-key="create_account">Ø¹Ø¶ÙˆÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h2>
            <div class="space-y-5">
                <input id="r-name" type="text" class="glass-input w-full p-4 outline-none" data-key-p="p_name">
                <input id="r-pass" type="password" class="glass-input w-full p-4 outline-none" data-key-p="p_pass">
                <p id="err-pass" class="text-red-400 text-xs hidden">Ø¶Ø¹ÙŠÙØ©! (Ø­Ø±Ù + Ø±Ù‚Ù… + 5 Ø®Ø§Ù†Ø§Øª)</p>
                <input id="r-phone" type="tel" class="glass-input w-full p-4 outline-none" data-key-p="p_phone">
                <p id="err-phone" class="text-red-400 text-xs hidden">ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 10 Ø£Ø±Ù‚Ø§Ù…</p>
                <input id="r-emg" type="tel" class="glass-input w-full p-4 outline-none" data-key-p="p_emg">
                <button onclick="actRegister()" class="w-full py-5 btn-grad rounded-2xl font-bold text-xl" data-key="confirm_reg">ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
            </div>
        </div>

        <div id="v-login" class="hidden max-w-md w-full glass p-10 relative">
            <button onclick="navTo('v-welcome')" class="absolute top-6 right-6 text-blue-400 font-bold">âœ•</button>
            <h2 class="text-3xl font-bold mb-8 text-center" data-key="login">Ø¯Ø®ÙˆÙ„</h2>
            <div class="space-y-6">
                <input id="l-name" type="text" class="glass-input w-full p-4 outline-none" data-key-p="p_name">
                <input id="l-pass" type="password" class="glass-input w-full p-4 outline-none" data-key-p="p_pass">
                <button onclick="actLogin()" class="w-full py-5 btn-grad rounded-2xl font-bold text-xl" data-key="enter">Ø¯Ø®ÙˆÙ„</button>
            </div>
        </div>

        <div id="v-dash" class="hidden max-w-6xl w-full glass p-10 mt-10">
            <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-6 border-b border-white/10 pb-8">
                <div>
                    <h2 class="text-4xl font-black"><span data-key="welcome"></span>ØŒ <span id="u-head" class="text-blue-400"></span></h2>
                </div>
                <div class="flex gap-4">
                    <button onclick="exportPDF()" class="p-4 glass bg-blue-600/20 hover:bg-blue-600/40 rounded-2xl transition">ğŸ“„ PDF</button>
                    <button onclick="logout()" class="p-4 bg-red-600/20 hover:bg-red-600/50 rounded-2xl transition" data-key="logout">Ø®Ø±ÙˆØ¬</button>
                </div>
            </div>
            
            <div id="pdf-content" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="space-y-2">
                    <label class="font-bold flex items-center gap-2">ğŸ’° <span data-key="w_debts"></span></label>
                    <textarea id="w1" class="glass-input w-full p-5 h-40 resize-none"></textarea>
                </div>
                <div class="space-y-2">
                    <label class="font-bold flex items-center gap-2">ğŸ  <span data-key="w_assets"></span></label>
                    <textarea id="w2" class="glass-input w-full p-5 h-40 resize-none"></textarea>
                </div>
                <div class="space-y-2">
                    <label class="font-bold flex items-center gap-2">ğŸ <span data-key="w_trusts"></span></label>
                    <textarea id="w3" class="glass-input w-full p-5 h-40 resize-none"></textarea>
                </div>
                <div class="space-y-2">
                    <label class="font-bold flex items-center gap-2">ğŸ•Œ <span data-key="w_religion"></span></label>
                    <textarea id="w4" class="glass-input w-full p-5 h-40 resize-none"></textarea>
                </div>
                <div class="md:col-span-2 space-y-2">
                    <label class="font-bold flex items-center gap-2">âœï¸ <span data-key="w_other"></span></label>
                    <textarea id="w5" class="glass-input w-full p-5 h-56 resize-none"></textarea>
                </div>
            </div>
            <button onclick="actSave()" class="w-full mt-10 py-6 btn-grad rounded-3xl font-black text-2xl" data-key="save_will">Ø­ÙØ¸ Ø§Ù„ÙˆØµÙŠØ©</button>
        </div>

        <div id="v-admin" class="hidden max-w-7xl w-full space-y-8 animate-in slide-in-from-bottom-10 duration-500">
            <div class="glass p-8 flex justify-between items-center border-r-8 border-amber-500">
                <h2 class="text-4xl font-black text-amber-500" data-key="admin_panel">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©</h2>
                <button onclick="logout()" class="px-8 py-3 bg-red-600 rounded-xl font-bold" data-key="logout">Ø®Ø±ÙˆØ¬</button>
            </div>
            <div id="admin-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
        </div>

    </main>

    <div id="settingsModal" class="fixed inset-0 bg-black/80 backdrop-blur-xl hidden z-[100] flex items-center justify-center p-6">
        <div class="glass max-w-sm w-full p-8 space-y-6">
            <div class="flex justify-between items-center"><h3 class="text-xl font-bold">âš™ï¸</h3><button onclick="closeM('settingsModal')" class="text-2xl">âœ•</button></div>
            <select id="langS" onchange="setL(this.value)" class="w-full p-4 glass-input outline-none cursor-pointer">
                <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option><option value="en">English</option><option value="he">×¢×‘×¨×™×ª</option>
            </select>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="document.body.style.filter='grayscale(0)'" class="p-4 glass rounded-xl">Ù…Ù„ÙˆÙ†</button>
                <button onclick="document.body.style.filter='grayscale(0.8)'" class="p-4 glass rounded-xl">Ù‡Ø§Ø¯Ø¦</button>
            </div>
        </div>
    </div>

    <div id="adminAuthModal" class="fixed inset-0 bg-black/95 backdrop-blur-2xl hidden z-[100] flex items-center justify-center p-6">
        <div class="glass max-w-md w-full p-10 text-center space-y-6">
            <h3 class="text-2xl font-bold text-amber-500" data-key="admin_auth">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
            <input id="adminKey" type="password" class="glass-input w-full p-5 text-center text-4xl tracking-widest outline-none" placeholder="****">
            <div class="flex gap-4">
                <button onclick="actVerifyAdmin()" class="flex-1 py-5 btn-grad rounded-2xl font-bold">Ø¯Ø®ÙˆÙ„</button>
                <button onclick="closeM('adminAuthModal')" class="flex-1 py-5 glass rounded-2xl">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>

    <script>
        const KEY = "26112027";
        let user = null;
        let lang = 'ar';

        const DICT = {
            ar: {
                settings: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª", title: "ÙˆÙØµÙÙŠÙÙ‘ØªÙÙŠ", verse: "ï´¿ÙƒÙØªÙØ¨Ù Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙÙ…Ù’ Ø¥ÙØ°ÙØ§ Ø­ÙØ¶ÙØ±Ù Ø£ÙØ­ÙØ¯ÙÙƒÙÙ…Ù Ø§Ù„Ù’Ù…ÙÙˆÙ’ØªÙ Ø¥ÙÙ†Ù’ ØªÙØ±ÙÙƒÙ Ø®ÙÙŠÙ’Ø±Ù‹Ø§ Ø§Ù„Ù’ÙˆÙØµÙÙŠÙÙ‘Ø©Ùï´¾",
                create_account: "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨", login: "Ø¯Ø®ÙˆÙ„", back: "Ø±Ø¬ÙˆØ¹", p_name: "Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",
                p_pass: "ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± (Ø­Ø±Ù+Ø±Ù‚Ù…)", p_phone: "Ø§Ù„Ø¬ÙˆØ§Ù„ (10 Ø£Ø±Ù‚Ø§Ù…)", p_emg: "Ø±Ù‚Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦", confirm_reg: "ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ù†Ø´Ø§Ø¡",
                admin_gate: "Ø§Ù„Ù…Ø´Ø±Ù", admin_auth: "Ø±Ù…Ø² Ø§Ù„Ù…Ø´Ø±Ù", enter: "Ø¯Ø®ÙˆÙ„", cancel: "Ø¥Ù„ØºØ§Ø¡", welcome: "Ù…Ø±Ø­Ø¨Ø§Ù‹",
                logout: "Ø®Ø±ÙˆØ¬", save_will: "Ø­ÙØ¸ Ø§Ù„ÙˆØµÙŠØ© Ø§Ù„Ø¢Ù†", w_debts: "Ø§Ù„Ø¯ÙŠÙˆÙ† ÙˆØ§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª", w_assets: "Ø§Ù„Ù…Ù…ØªÙ„ÙƒØ§Øª ÙˆØªÙˆØ²ÙŠØ¹Ù‡Ø§",
                w_trusts: "Ø§Ù„Ø£Ù…Ø§Ù†Ø§Øª ÙˆØ§Ù„ÙˆØ¯Ø§Ø¦Ø¹", w_religion: "ÙƒÙØ§Ø±Ø§Øª ÙˆÙ†Ø°ÙˆØ±", w_other: "ÙˆØµØ§ÙŠØ§ Ø£Ø®Ø±Ù‰ ÙˆØ±Ø³Ø§Ø¦Ù„", 
                admin_panel: "Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©", save_ok: "ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±!"
            },
            en: {
                settings: "Settings", title: "MY WILL", verse: "It is prescribed for you, when death approaches any of you...",
                create_account: "Register", login: "Login", back: "Back", p_name: "Full Name",
                p_pass: "Password", p_phone: "Phone", p_emg: "Emergency", confirm_reg: "Confirm",
                admin_gate: "Admin", admin_auth: "Admin Access", enter: "Enter", cancel: "Cancel", welcome: "Welcome",
                logout: "Logout", save_will: "Save Will", w_debts: "Debts", w_assets: "Assets",
                w_trusts: "Trusts", w_religion: "Religion", w_other: "Extra Wishes", admin_panel: "Admin Panel", save_ok: "Saved!"
            }
            // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø¨Ø±ÙŠ Ø¨Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ù‡Ù†Ø§..
        };

        // Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
        function createStars() {
            const container = document.getElementById('stars-container');
            for(let i=0; i<100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 3 + 'px';
                star.style.width = size; star.style.height = size;
                star.style.top = Math.random() * 100 + '%';
                star.style.left = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(star);
            }
        }

        // Ø§Ù„Ù…Ù„Ø§Ø­Ø©
        function navTo(id) {
            document.querySelectorAll('main > div').forEach(d => d.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }
        function openM(id) { document.getElementById(id).classList.remove('hidden'); }
        function closeM(id) { document.getElementById(id).classList.add('hidden'); }

        function setL(l) {
            lang = l;
            document.getElementById('mainHtml').dir = (l === 'en') ? 'ltr' : 'rtl';
            const d = DICT[l];
            document.querySelectorAll('[data-key]').forEach(el => el.innerText = d[el.dataset.key]);
            document.querySelectorAll('[data-key-p]').forEach(el => el.placeholder = d[el.dataset.keyP]);
            closeM('settingsModal');
        }

        // Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        function actRegister() {
            const n = document.getElementById('r-name').value;
            const p = document.getElementById('r-pass').value;
            const ph = document.getElementById('r-phone').value;
            const em = document.getElementById('r-emg').value;

            if(!/[a-zA-Z]/.test(p) || !/\d/.test(p) || p.length < 5) {
                return document.getElementById('err-pass').classList.remove('hidden');
            }
            if(ph.length !== 10) return document.getElementById('err-phone').classList.remove('hidden');

            const uData = { name: n, pass: p, phone: ph, emg: em, will: {} };
            localStorage.setItem('WILL_USER_' + n, JSON.stringify(uData));
            alert("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„!"); navTo('v-login');
        }

        // Ø§Ù„Ø¯Ø®ÙˆÙ„
        function actLogin() {
            const n = document.getElementById('l-name').value;
            const p = document.getElementById('l-pass').value;
            const data = localStorage.getItem('WILL_USER_' + n);

            if(data && JSON.parse(data).pass === p) {
                user = JSON.parse(data);
                document.getElementById('u-head').innerText = user.name;
                for(let i=1; i<=5; i++) document.getElementById('w'+i).value = user.will['w'+i] || '';
                navTo('v-dash');
            } else alert("Ø®Ø·Ø£!");
        }

        function actSave() {
            for(let i=1; i<=5; i++) user.will['w'+i] = document.getElementById('w'+i).value;
            localStorage.setItem('WILL_USER_' + user.name, JSON.stringify(user));
            alert(DICT[lang].save_ok);
        }

        // --- Ø¥ØµÙ„Ø§Ø­ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù ---
        function actVerifyAdmin() {
            const val = document.getElementById('adminKey').value;
            if (val === KEY) {
                closeM('adminAuthModal');
                renderAdmin();
                navTo('v-admin');
            } else alert("Ø§Ù„Ø±Ù…Ø² Ø®Ø§Ø·Ø¦!");
        }

        function renderAdmin() {
            const grid = document.getElementById('admin-grid');
            grid.innerHTML = "";
            let found = 0;

            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('WILL_USER_')) {
                    found++;
                    const u = JSON.parse(localStorage.getItem(key));
                    grid.innerHTML += `
                        <div class="glass p-6 border-b-4 border-amber-500 hover:scale-105 transition duration-300">
                            <h3 class="text-xl font-bold text-amber-400 mb-2">${u.name}</h3>
                            <div class="text-sm opacity-70 space-y-1">
                                <p>ğŸ“ ${u.phone}</p>
                                <p>ğŸ†˜ ${u.emg}</p>
                                <p class="text-xs text-blue-300">ğŸ”‘ Ø§Ù„Ø³Ø±: ${u.pass}</p>
                            </div>
                            <div class="mt-4 p-3 bg-black/40 rounded text-xs truncate">
                                ${u.will.w5 || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµØ§ÙŠØ§ Ù…Ø¶Ø§ÙØ© Ø¨Ø¹Ø¯'}
                            </div>
                        </div>
                    `;
                }
            }
            if(found === 0) grid.innerHTML = "<p class='col-span-full text-center opacity-50'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ† Ø¨Ø¹Ø¯</p>";
        }

        function logout() { location.reload(); }

        function exportPDF() {
            const element = document.getElementById('pdf-content');
            const opt = { margin: 10, filename: 'will.pdf', image: { type: 'jpeg', quality: 0.98 }, html2canvas: { scale: 2 }, jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' } };
            html2pdf().set(opt).from(element).save();
        }

        createStars();
        setL('ar');
    </script>
</body>
</html>